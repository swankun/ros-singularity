Bootstrap: docker
From: osrf/ros:noetic-desktop-full
Stage: build

%files
    /home/wankun/Singularity/assets/rosbashrc /

%post -c /bin/bash
    CUSTOM_ENV=/.singularity.d/env/99-zz_custom_env.sh
    cat >$CUSTOM_ENV <<EOF
#!/bin/bash
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@[ros-$ROS_DISTRO]\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
EOF
    chmod 755 $CUSTOM_ENV
    apt update
    apt -y install vim git 
    rosdep update
    apt -y install python3-catkin-tools python3-catkin-lint python3-pip
    pip3 install osrf-pycommon

%runscript
    exec /bin/bash --rcfile /rosbashrc "$@"